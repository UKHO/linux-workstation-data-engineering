---

- name: Docker YUM depencies present
  yum:
    name:
      - yum-utils
      - device-mapper-persistent-data
      - lvm2
    state: present

- name: "add docker-ce yum repo"
  shell: yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo

# - name: Docker YUM repo present
#   yum_repository:
#     name: docker
#     description: Docker YUM repo
#     baseurl: https://download.docker.com/linux/centos/docker-ce.repo

- name: Docker present
  tags:
    - docker
  yum:
    state: present
    name: docker-ce

- name: Docker started
  tags:
    - docker
  service:
    name: docker
    state: started

- name: User in Docker group
  user:
    name: root
    groups: docker
    append: yes